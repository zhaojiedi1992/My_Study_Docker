<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
  <head>
    <meta charset="utf-8" />
    <title>4. 使用多步构建</title>
    <link rel="stylesheet" href="../_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" type="text/css" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" type="text/css" /> 
  </head><body>

    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="id1">
<h1>4. 使用多步构建</h1>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="k">FROM</span><span class="s"> golang:1.7.3</span>
<span class="k">WORKDIR</span><span class="s"> /go/src/github.com/alexellis/href-counter/</span>
<span class="k">RUN</span> go get -d -v golang.org/x/net/html
COPY app.go .
<span class="k">RUN</span> <span class="nv">CGO_ENABLED</span><span class="o">=</span><span class="m">0</span> <span class="nv">GOOS</span><span class="o">=</span>linux go build -a -installsuffix cgo -o app .

<span class="k">FROM</span><span class="s"> alpine:latest</span>
<span class="k">RUN</span> apk --no-cache add ca-certificates
<span class="k">WORKDIR</span><span class="s"> /root/</span>
COPY --from<span class="o">=</span><span class="m">0</span> /go/src/github.com/alexellis/href-counter/app .
<span class="k">CMD</span><span class="s"> [&quot;./app&quot;]</span>
</pre></div>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
  </body>
</html>